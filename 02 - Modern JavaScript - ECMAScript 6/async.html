<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <span>Promises and Async</span>

    <script>
        // This is the traditional way, using promisses (then)
        function consumeWebService() {
            fetch("https://jsonplaceholder.typicode.com/todos/1")
                .then(response => response.json())
                .catch(error => alert('something bad just happened :('))
                .then(json => console.log(json));
        }

        // Now, marking the function as async, we can use the await operator
        async function consumeWebServiceAsync() {
            try {
                const response = await fetch("https://jsonplaceholder.typicode.com/todos/1");
                const json = await response.json(); // like in c#
                console.log(json);
            }
            catch (ex) {
                alert('something bad just happened :(');
            }
        }

        // consumeWebService();
        consumeWebServiceAsync();
    </script>
</body>
</html>
